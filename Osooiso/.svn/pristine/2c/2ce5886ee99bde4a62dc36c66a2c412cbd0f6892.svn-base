
/* Drop Tables */

DROP TABLE RECOMEND CASCADE CONSTRAINTS;
DROP TABLE BBSCTT CASCADE CONSTRAINTS;
DROP TABLE MBER CASCADE CONSTRAINTS;




/* Create Tables */

CREATE TABLE BBSCTT
(
	BBSCTT_NO varchar2(4) NOT NULL,
	UP_BBSCTT_NO varchar2(4),
	MBER_NO varchar2(4) NOT NULL,
	BBSCTT_SJ varchar2(60) NOT NULL,
	BBSCTT_CN varchar2(300),
	BBSCTT_DATE date,
	INDICT_AT char NOT NULL,
	CMMN_CODE varchar2(255),
	PHOTO_ADRES varchar2(255),
	PRIMARY KEY (BBSCTT_NO)
);


CREATE TABLE MBER
(
	MBER_NO varchar2(4) NOT NULL,
	EMAIL varchar2(30) NOT NULL UNIQUE,
	PASSWORD varchar2(20) NOT NULL,
	TELNM varchar2(11),
	NCNM varchar2(15),
	SRBDE varchar2(8),
	MBER_AT char,
	PRIMARY KEY (MBER_NO)
);


CREATE TABLE RECOMEND
(
	MBER_NO varchar2(4) NOT NULL,
	BBSCTT_NO varchar2(4) NOT NULL,
	-- y or n
	RECOMEND_AT char,
	PRIMARY KEY (MBER_NO, BBSCTT_NO)
);



/* Create Foreign Keys */

ALTER TABLE BBSCTT
	ADD FOREIGN KEY (UP_BBSCTT_NO)
	REFERENCES BBSCTT (BBSCTT_NO)
;


ALTER TABLE RECOMEND
	ADD FOREIGN KEY (BBSCTT_NO)
	REFERENCES BBSCTT (BBSCTT_NO)
;


ALTER TABLE BBSCTT
	ADD FOREIGN KEY (MBER_NO)
	REFERENCES MBER (MBER_NO)
;


ALTER TABLE RECOMEND
	ADD FOREIGN KEY (MBER_NO)
	REFERENCES MBER (MBER_NO)
;



/* Comments */

COMMENT ON COLUMN RECOMEND.RECOMEND_AT IS 'y or n';



