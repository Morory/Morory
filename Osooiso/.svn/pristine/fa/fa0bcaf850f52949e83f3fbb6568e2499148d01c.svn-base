
/* Drop Tables */

DROP TABLE PHOTO CASCADE CONSTRAINTS;
DROP TABLE RECOMEND CASCADE CONSTRAINTS;
DROP TABLE BBSCTT CASCADE CONSTRAINTS;
DROP TABLE CMMN_CODE CASCADE CONSTRAINTS;
DROP TABLE MBER CASCADE CONSTRAINTS;

			//CREATE SEQUENCE MBER_NO_SEQ
			//START WITH 1
			//INCREMENT BY 1;


/* Create Tables */

-- 게시글
CREATE TABLE BBSCTT
(
	-- 게시글번호
	BBSCTT_NM varchar2(4) NOT NULL,
	-- 상위게시글번호
	UP_BBSCTT_NM varchar2(4),
	-- 회원ID
	MBER_ID varchar2(4) NOT NULL,
	-- 게시글제목
	BBSCTT_SJ varchar2(60) NOT NULL,
	-- 게시글내용
	BBSCTT_CN varchar2(300),
	-- 게시글날짜
	BBSCTT_DATE date,
	-- 표시여부
	INDICT_AT char CHECK (INDICT_AT in('y', 'n')) NOT NULL,
	PRIMARY KEY (BBSCTT_NM)
);


-- 공통코드
CREATE TABLE CMMN_CODE
(
	-- 코드유형
	CODE_TY varchar2(2) NOT NULL,
	-- 상세코드
	DETAIL_CODE varchar2(2) NOT NULL,
	-- 태그명
	TAG_NM varchar2(30),
	PRIMARY KEY (CODE_TY, DETAIL_CODE)
);


-- 회원
CREATE TABLE MBER
(
	-- 회원번호
	MBER_NO varchar2(4) NOT NULL,
	-- 이메일
	EMAIL varchar2(30) NOT NULL UNIQUE,
	-- 비밀번호
	PASSWORD varchar2(20) NOT NULL,
	-- 전화번호
	TELNM varchar2(11),
	-- 별명
	NCNM varchar2(15),
	-- 가입일
	SRBDE varchar2(8),
	-- 회원삭제여부
	MBER_AT char CHECK (MBER_AT in('y', 'n')) not null,
	PRIMARY KEY (MBER_NO)
);



-- 사진
CREATE TABLE PHOTO
(
	-- 게시글번호
	BBSCTT_NM varchar2(4) NOT NULL,
	-- 사진번호
	PHOTO_NM number(1) NOT NULL,
	-- 사진주소
	PHOTO_ADRES varchar2(90),
	PRIMARY KEY (BBSCTT_NM, PHOTO_NM)
);


-- 추천
CREATE TABLE RECOMEND
(
	-- 회원번호
	MBER_NO varchar2(4) NOT NULL,
	-- 게시글번호
	BBSCTT_NM varchar2(4) NOT NULL,
	-- 추천여부 : y or n
	RECOMEND_AT char CHECK (RECOMEND_AT in('y', 'n')) NOT NULL,
	PRIMARY KEY (MBER_NO, BBSCTT_NM)
);



/* Create Foreign Keys */

ALTER TABLE BBSCTT
	ADD FOREIGN KEY (UP_BBSCTT_NM)
	REFERENCES BBSCTT (BBSCTT_NM)
;


ALTER TABLE PHOTO
	ADD FOREIGN KEY (BBSCTT_NM)
	REFERENCES BBSCTT (BBSCTT_NM)
;


ALTER TABLE RECOMEND
	ADD FOREIGN KEY (BBSCTT_NM)
	REFERENCES BBSCTT (BBSCTT_NM)
;


ALTER TABLE BBSCTT
	ADD FOREIGN KEY (MBER_ID)
	REFERENCES MBER (MBER_NO)
;


ALTER TABLE RECOMEND
	ADD FOREIGN KEY (MBER_NO)
	REFERENCES MBER (MBER_NO)
;



/* Comments */

COMMENT ON TABLE BBSCTT IS '게시글';
COMMENT ON COLUMN BBSCTT.BBSCTT_NM IS '게시글번호';
COMMENT ON COLUMN BBSCTT.UP_BBSCTT_NM IS '상위게시글번호';
COMMENT ON COLUMN BBSCTT.MBER_ID IS '회원ID';
COMMENT ON COLUMN BBSCTT.BBSCTT_SJ IS '게시글제목';
COMMENT ON COLUMN BBSCTT.BBSCTT_CN IS '게시글내용';
COMMENT ON COLUMN BBSCTT.BBSCTT_DATE IS '게시글날짜';
COMMENT ON COLUMN BBSCTT.INDICT_AT IS '표시여부';
COMMENT ON TABLE CMMN_CODE IS '공통코드';
COMMENT ON COLUMN CMMN_CODE.CODE_TY IS '코드유형';
COMMENT ON COLUMN CMMN_CODE.DETAIL_CODE IS '상세코드';
COMMENT ON COLUMN CMMN_CODE.TAG_NM IS '태그명';
COMMENT ON TABLE MBER IS '회원';
COMMENT ON COLUMN MBER.MBER_NO IS '회원번호';
COMMENT ON COLUMN MBER.EMAIL IS '이메일';
COMMENT ON COLUMN MBER.PASSWORD IS '비밀번호';
COMMENT ON COLUMN MBER.TELNM IS '전화번호';
COMMENT ON COLUMN MBER.NCNM IS '별명';
COMMENT ON COLUMN MBER.SRBDE IS '가입일';
COMMENT ON COLUMN MBER.MBER_AT IS '회원삭제여부';
COMMENT ON TABLE PHOTO IS '사진';
COMMENT ON COLUMN PHOTO.BBSCTT_NM IS '게시글번호';
COMMENT ON COLUMN PHOTO.PHOTO_NM IS '사진번호';
COMMENT ON COLUMN PHOTO.PHOTO_ADRES IS '사진주소';
COMMENT ON TABLE RECOMEND IS '추천';
COMMENT ON COLUMN RECOMEND.MBER_NO IS '회원번호';
COMMENT ON COLUMN RECOMEND.BBSCTT_NM IS '게시글번호';
COMMENT ON COLUMN RECOMEND.RECOMEND_AT IS '추천여부 : y or n';



/*
여기서 부턴 복사하지 말 것.

INDICT_AT char CHECK (INDICT_AT in('y', 'n')) NOT NULL
MBER_AT char CHECK (MBER_AT in('y', 'n')) not null
RECOMEND_AT char CHECK (RECOMEND_AT in('y', 'n')) NOT NULL
*/